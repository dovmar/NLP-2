var scrollPos=null;function sidenavShow(compose){if(compose===undefined){compose=null;}if($("#sidenavWrapper").hasClass("nonactive")){return false;}else{$("#sidenav, #sidenavWrapper, #sidenavBlocker").addClass("active");if($(window).scrollTop()!=0)scrollPos=$(window).scrollTop();document.body.classList.add('noScroll');}}function sidenavHide(){if($("#sidenavWrapper").hasClass("nonactive")){return false;}else{$("#sidenav").busyLoad("show");$("#sidenavBlocker").removeClass("active");$("#sidenavWrapper").removeClass("active").addClass("nonactive");$("#sidenav").addClass("nonactive");if($("#sidenav .card-body [data-col='compose']").length>0)$("#sidenav .card-body [data-col='compose']").remove();$(".sidenavCompose").removeClass('sidenavCompose');$(".sidenavComposeClose").removeClass('sidenavComposeClose');$(".card-body_cross-selling").removeClass('card-body_cross-selling');setTimeout(function(){$("#sidenav").busyLoad("hide");$("#sidenav").removeClass("active nonactive");$("#sidenavWrapper").removeClass("nonactive");},501);document.body.classList.remove('noScroll');$('html, body').scrollTop(scrollPos);}}function sidenavLoadItem(event,target){event.preventDefault();sidenavShow();var myDiv=document.getElementById('sidenav');myDiv.scrollTop=0;var is_csi=target.data('csi')?true:false;var sidenavTarget=is_csi?$("#sidenav .card-body [data-col='compose']"):$("#sidenav .card-body [data-col='base']");var url=validateURL.URL()+(is_csi?'/products/item_compose_slidenav':'/products/item_slidenav');var data=is_csi?{"id":target.data("item"),"selected":false}:{"id":target.data("item"),"hide":{"favourites":(target.data('favourites')&&target.data('favourites')>=1)?true:false,"btnItem":(target.data('hideadd')&&target.data('hideadd')>=1)?true:false,}};if(is_csi){sidenavTarget.busyLoad('show');}$.ajax({async:true,type:"GET",data:data,dataType:"html",url:url,success:function(result){sidenavTarget.html(result);sidenavTarget.find('img:first').on('load',function(){$('.productInfo-header[data-slider="sidenav"]:not(.slick-initialized)').slick({autoplay:false,autoplaySpeed:8000,slidesToShow:1,slidesToScroll:1,adaptiveHeight:false,fade:false,speed:500,dots:false,infinite:true,responsive:[{breakpoint:768,settings:{slidesToShow:1}}]});});$("#sidenav").find("[data-action='showsidenav']").click(function(event){sidenavLoadItem(event,$(this));});alternativeSelect.main();favorites.main();},complete:function(){if(is_csi){sidenavTarget.busyLoad('hide');}},timeout:10000});}function openSidenavAnimateStyle(event,width){if(width===undefined){width=null;}if(width){let offset=$('#contentWrapper .container:first-of-type').offset();if(offset&&offset.left&&offset.left>width){$('#sidenavWrapper, #sidenavBlocker, #sidenav').addClass('no-push');}else{if($('#sidenavWrapper, #sidenavBlocker, #sidenav').hasClass('no-push')){$('#sidenavWrapper, #sidenavBlocker, #sidenav').removeClass('no-push');}}}}$(document).ready(function(){$(document).on('click swipe',"[data-action='sidenav'], #promotions_slick",function(event){if(event.type==='click'&&typeof event.currentTarget.dataset.action!=='undefined'){event.preventDefault();sidenavLoadItem(event,$(this));return false;}else{return false;}});$("#sidenavBlocker").click(function(event){sidenavHide(event,$(this));});openSidenavAnimateStyle($('#sidenav'),$('#sidenav').width());$(window).resize(function(){openSidenavAnimateStyle($('#sidenav'),$('#sidenav').width());});});$(document).ajaxSend(function(event,jqxhr,settings){if(settings.url.indexOf('shoppingcart/addQuantityToCart')===-1){$("#sidenav:not(.sidenavCompose)").busyLoad("show",{animation:"fade"});}}).ajaxComplete(function(event,jqxhr,settings){if(settings.url.indexOf('shoppingcart/addQuantityToCart')===-1){$("#sidenav:not(.sidenavCompose)").busyLoad("hide",{animation:"fade"});}});