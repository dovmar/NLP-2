var Searcher={lastQuery:null,autocompleteDOM:null,autocompleteTranslations:null,lastResult:null,initialize:function(){Searcher.autocompleteDOM=$(".ui-autocomplete");$('#header_searcher_desktop_input').keydown(function(event){if((event.keyCode==13)&&($(this).val().length<3)){event.preventDefault();return false;}});$('[data-action="search"]').each(function(index){Searcher.initialize_autocomplete("#"+$(this).attr("id"));});$("[data-action='searcherImg']").click(function(){if($("#header_searcher_desktop_input").val().length>2){$("#header_searcher_"+$(this).data("type")+"_input_container").submit();}});},autocomplete:function(request,response){var query=request.term.trim();if(query===Searcher.lastquery){response(Searcher.lastResult);return;}else{Searcher.lastquery=query;}if(query.length<3){Searcher.autocompleteDOM.hide();return;}$.ajax({type:"GET",dataType:"json",contentType:"application/x-www-form-urlencoded",url:validateURL.URL()+'/search/autocomplete',data:{"term":query},success:function(result){Searcher.lastResult=result;response(result);},timeout:10000});},initialize_autocomplete:function(selector){$(selector).autocomplete({appendTo:selector+"_container",source:Searcher.autocomplete,open:function(event,ui){Searcher.separatorItem=null;}}).data("ui-autocomplete")._renderItem=function(ul,item){if(!ul.hasClass('searcherList')){ul.addClass('searcherList');}var typeTranslation=Searcher.autocompleteTranslations[item.type];var separatorText="";var colour=item.colour;if(Searcher.separatorItem!==typeTranslation){Searcher.separatorItem=typeTranslation;separatorText='<span class="itemSeparator">'+Searcher.separatorItem+'</span>';}if(item.type=="RA"){var arrAux=item.highlighted.split("|");item.highlighted='<span class="itemHFB" >'+arrAux[1]+'</span> > '+arrAux[0];}var element=$('<li class="searcherList" role="presentation" >'+separatorText+'<a style="display:block; width:100%; height:100%;" class="ui-corner-all" >'+item.highlighted+'</a></li>');element.on('click touchend',function(e){e.preventDefault();document.location.href=validateURL.URL()+item.action;});return element.appendTo(ul);};}};$(Searcher.initialize);$('#searcherDropdown').click(function(e){e.preventDefault();if($('#headerMainToggler').hasClass('show')){$('.navbar-toggler-cross').click();}$('#header_searcher_mobile_input_container').toggleClass('visibilitySearcher');$("#header_searcher_mobile_input").focus();});$('#close-wrapper').click(function(e){$("#header_searcher_mobile_input").val('');$('#header_searcher_mobile_input_container').toggleClass('visibilitySearcher');});